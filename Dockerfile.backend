FROM node:20-alpine

# pnpm kur
RUN npm install -g pnpm

WORKDIR /app

# Repository çek
RUN apk add --no-cache git && \
    git clone https://github.com/Nerimity/nerimity-server.git . 

# Bağımlılıkları pnpm ile kur
RUN pnpm install

# Build (TS kullanıyor)
RUN pnpm build

EXPOSE 3001

CMD ["pnpm", "start"]
